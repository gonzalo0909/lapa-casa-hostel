# lapa-casa-hostel/backend/.env.example

# ===========================================
# LAPA CASA HOSTEL - BACKEND ENVIRONMENT
# Channel Manager Configuration
# Copy this file to .env and fill with your values
# ===========================================

# ===========================================
# APPLICATION
# ===========================================
NODE_ENV=development
PORT=5000
API_VERSION=v1
APP_NAME=lapa-casa-hostel-backend
APP_URL=http://localhost:5000

# ===========================================
# FRONTEND
# ===========================================
FRONTEND_URL=http://localhost:3000
CORS_ORIGINS=http://localhost:3000,https://lapacasahostel.com,https://www.lapacasahostel.com

# ===========================================
# DATABASE - POSTGRESQL
# ===========================================
DATABASE_URL=postgresql://username:password@host:5432/database_name?schema=public
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# ===========================================
# REDIS CACHE
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ===========================================
# JWT AUTHENTICATION
# Generate strong secrets: openssl rand -base64 32
# ===========================================
JWT_SECRET=CHANGE_THIS_TO_A_RANDOM_SECRET_AT_LEAST_32_CHARACTERS_LONG
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_RANDOM_SECRET_AT_LEAST_32_CHARS
JWT_REFRESH_EXPIRES_IN=30d

# ===========================================
# ENCRYPTION
# Generate: openssl rand -hex 16
# ===========================================
ENCRYPTION_KEY=CHANGE_THIS_32_CHARACTER_KEY_HERE
ENCRYPTION_ALGORITHM=aes-256-gcm

# ===========================================
# STRIPE PAYMENTS
# Get from: https://dashboard.stripe.com/apikeys
# ===========================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_API_VERSION=2023-10-16

# ===========================================
# MERCADO PAGO - BRAZIL
# Get from: https://www.mercadopago.com.br/developers
# ===========================================
MERCADO_PAGO_ACCESS_TOKEN=APP_USR-your-access-token
MERCADO_PAGO_PUBLIC_KEY=APP_USR-your-public-key
MERCADO_PAGO_WEBHOOK_SECRET=your-mp-webhook-secret

# ===========================================
# GOOGLE SHEETS INTEGRATION
# Create service account: https://console.cloud.google.com/
# ===========================================
GOOGLE_SHEETS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
GOOGLE_SHEETS_CLIENT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
GOOGLE_SHEETS_SPREADSHEET_ID=your_spreadsheet_id
GOOGLE_SHEETS_WORKSHEET_NAME=Bookings

# ===========================================
# EMAIL - RESEND
# Get from: https://resend.com/api-keys
# ===========================================
RESEND_API_KEY=re_your_resend_api_key
EMAIL_FROM=bookings@lapacasahostel.com
EMAIL_FROM_NAME=Lapa Casa Hostel
EMAIL_REPLY_TO=contact@lapacasahostel.com

# ===========================================
# WHATSAPP INTEGRATION
# Get from: https://developers.facebook.com/
# ===========================================
WHATSAPP_API_TOKEN=your_whatsapp_api_token
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_BUSINESS_ACCOUNT_ID=your_business_account_id
WHATSAPP_VERIFY_TOKEN=your_webhook_verify_token

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_BOOKING_MAX=10

# ===========================================
# LOGGING
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs
LOG_MAX_FILES=14d

# ===========================================
# MONITORING
# Get from: https://sentry.io/
# ===========================================
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090

# ===========================================
# BACKUP
# ===========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=lapa-casa-hostel-backups

# ===========================================
# BUSINESS LOGIC - LAPA CASA SPECIFIC
# Do not change these values
# ===========================================
# Room IDs
ROOM_MIXTO_12A_ID=room_mixto_12a
ROOM_MIXTO_12B_ID=room_mixto_12b
ROOM_MIXTO_7_ID=room_mixto_7
ROOM_FLEXIBLE_7_ID=room_flexible_7

# Pricing (BRL)
BASE_PRICE_PER_BED=60.00
GROUP_DISCOUNT_7_BEDS=0.10
GROUP_DISCOUNT_16_BEDS=0.15
GROUP_DISCOUNT_26_BEDS=0.20

# Seasons
SEASON_HIGH_MULTIPLIER=1.50
SEASON_MEDIUM_MULTIPLIER=1.00
SEASON_LOW_MULTIPLIER=0.80
SEASON_CARNIVAL_MULTIPLIER=2.00

# Deposits
DEPOSIT_STANDARD_PERCENTAGE=0.30
DEPOSIT_LARGE_GROUP_PERCENTAGE=0.50
DEPOSIT_LARGE_GROUP_THRESHOLD=15
AUTO_CHARGE_DAYS_BEFORE=7
PAYMENT_RETRY_ATTEMPTS=3

# Flexible Room
FLEXIBLE_ROOM_AUTO_CONVERT_HOURS=48
FLEXIBLE_ROOM_DEFAULT_TYPE=female

# ===========================================
# FEATURE FLAGS
# ===========================================
ENABLE_ANTI_OVERBOOKING=true
ENABLE_AUTO_PAYMENT_RETRY=true
ENABLE_WHATSAPP_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_GOOGLE_SHEETS_SYNC=true
ENABLE_ANALYTICS=true

# ===========================================
# SECURITY
# ===========================================
HELMET_ENABLED=true
CSRF_ENABLED=true
SECURE_COOKIES=false
COOKIE_DOMAIN=localhost
TRUSTED_PROXIES=

# ===========================================
# DEVELOPMENT ONLY
# ===========================================
DEBUG=false
MOCK_PAYMENTS=false
SKIP_EMAIL_VERIFICATION=true
